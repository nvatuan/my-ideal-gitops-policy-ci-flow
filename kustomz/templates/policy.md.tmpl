## üõ°Ô∏è Policy Evaluation

{{range $env, $sum := .MultiEnvPolicyReport.Summary}}
**{{$env}}:** {{$sum.PassedPolicies}}/{{$sum.TotalPolicies}} passed{{if gt $sum.FailedPolicies 0}} | ‚ùå {{$sum.FailedPolicies}} failed{{end}}{{if gt $sum.ErroredPolicies 0}} | üí• {{$sum.ErroredPolicies}} errored{{end}}  
{{end}}

### Policy Matrix

| Policy | Enforcement |{{range .MultiEnvPolicyReport.Environments}} `{{.}}` |{{end}}
|--------|-------------|{{range .MultiEnvPolicyReport.Environments}}--------|{{end}}
{{range $policy := .MultiEnvPolicyReport.Policies}}| {{$policy.Name}} | `{{$policy.Level}}` | 
{{- range $env := $.MultiEnvPolicyReport.Environments}}{{$result := index $policy.Results $env}} {{if $result}}
{{- if eq $result.Status "PASS"}}‚úÖ{{else if eq $result.Status "FAIL"}}‚ö†Ô∏è{{else}}{{$result.Status}}{{end}}{{else}}N/A{{end}} |{{end}}
{{end}}

{{range $env, $sum := .MultiEnvPolicyReport.Summary}}
{{if gt $sum.FailedPolicies 0}}
### ‚ö†Ô∏è Failed Policies in {{$env}}

{{range $.MultiEnvPolicyReport.Policies}}
{{$result := index .Results $env}}
{{if and $result (ne $result.Status "PASS")}}
#### {{.Name}}
- **Enforcement:** {{.Level}}
{{if $result.Violations}}- **Violations:**{{range $result.Violations}}
  - {{.}}{{end}}{{end}}
{{if $result.Error}}- **Error:** {{$result.Error}}{{end}}
{{end}}
{{end}}
{{end}}
{{end}}

